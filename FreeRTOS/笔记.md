# FreeRTOS学习笔记
- 学习路线是《Using the FreeRTOS Real Time Kernel》一书而来。重点记录的是原理，而不是如何使用。
- 任务管理：  
  FreeRTOS的每个任务都是一段独立的程序。每个程序都是一个死循环。而且死循环不可以用break或return之类的语句退出。任务简单的划分可以分为运行状态和非运行状态。任务有优先级，优先级数值越小表示优先级越低。调度器保证总是在所有可运行的任务中选择具有最高优先级的任务，并使其进入运行态。如果高优先级的任务一直处于运行态。低优先级的任务将得不到运行。相同优先级的任务会有一个时间片，时间片开始就进入运行态。结束进入非运行态。由于该种特性，任务是不可以一直处于运行状态的，除非该任务处于最低的优先级，否则比它低优先级的任务永远没有可能执行。所以任务需要切换到非运行态。举例来说，比如任务一是让一个LED闪烁。而任务二让另一个LED闪烁。如果2个闪烁的方式是最传统的死循环延时方式，若2个任务同等优先级，则2个LED均可以正常闪烁。而任务一的优先级高于任务二，则任务二对应的LED是没有机会闪烁的。类似的等待时间，需要让任务处于堵塞态而不是死循环死等，死等其实也是运行态，应为CPU需要不断的计数然后判断数据是否达到设定的时间，虽然这么做仅仅是为了耗时间，但CPU确实是在运行的。如果用堵塞态，调度器就会去执行低优先级的事件。若没有低优先级的事情可做。将进入空闲状态。  
  FreeRTOS是可以改变任务优先级的，修改优先级以后，调度器是会去执行更高优先级的任务。创建的任务可以删除。  
  调度算法：一：优先级抢占式调度。特点有 1.每个任务都赋予了一个优先级。2.每个任务都可以存在于一个或多个状态。3.在任何时候都只有一个任务可以处于运行状态。4.调度器总是在所有处于就绪态的任务中选择具有最高优先级的任务来执行。二：选择任务优先级，常用的一种方式是单调速率调度。根据任务周期性执行的速率来分配一个唯一的优先级。具有最高周期执行频率的任务赋予高最优先级；具有最低周期执行频率的任务赋予最低优先级。三：协作式调度。任务永远不会被抢占。  
